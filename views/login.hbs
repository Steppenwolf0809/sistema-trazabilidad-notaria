<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProNotary - Gesti√≥n Notarial Inteligente | Notar√≠a 18</title>
  
  <!-- Preconnect para optimizaci√≥n de carga -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Google Fonts - Tipograf√≠a moderna -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <!-- Bootstrap CSS (solo grid y utilities) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome para iconograf√≠a -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Estilos espec√≠ficos del login -->
  <link rel="stylesheet" href="/css/login.css">
  
  <!-- Meta tags para SEO y redes sociales -->
  <meta name="description" content="ProNotary - Sistema de Gesti√≥n Notarial Inteligente de la Notar√≠a D√©cima Octava del Cant√≥n Quito. Dra. Glenda Elizabeth Zapata Silva.">
  <meta name="keywords" content="notar√≠a, gesti√≥n notarial, documentos, ProNotary, Quito, Ecuador">
  <meta name="author" content="Notar√≠a 18 - Dra. Glenda Elizabeth Zapata Silva">
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <!-- Optimizaci√≥n para dispositivos m√≥viles -->
  <meta name="theme-color" content="#1E88E5">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>

<body class="login-page">
  <!-- Contenedor principal del login -->
  <div class="login-container">
    
    <!-- ========================================
         LADO IZQUIERDO - BRANDING Y PRESENTACI√ìN
         ======================================== -->
    <section class="login-branding" aria-label="Informaci√≥n de la Notar√≠a">
      <!-- Icono decorativo de justicia -->
      <i class="fas fa-balance-scale icono-justicia" aria-hidden="true"></i>
      
      <!-- Contenido principal del branding -->
      <div class="branding-content">
        <!-- Logo GZS con badge de Notar√≠a 18 -->
        <div class="logo-gzs" role="img" aria-label="Logo GZS Notar√≠a 18">
          <span class="logo-text">GZS</span>
          <span class="notaria-number">18</span>
        </div>
        
        <!-- T√≠tulos del sistema -->
        <h1 class="sistema-titulo">ProNotary</h1>
        <p class="sistema-subtitulo">Gesti√≥n Notarial Inteligente</p>
        
        <!-- Informaci√≥n institucional -->
        <div class="notaria-info">
          <h2 class="notaria-nombre">Notar√≠a D√©cima Octava del Cant√≥n Quito</h2>
          <p class="notaria-titular">Dra. Glenda Elizabeth Zapata Silva</p>
          <div class="notaria-detalles">
            <p><i class="fas fa-map-marker-alt" aria-hidden="true"></i> Quito, Ecuador</p>
            <p><i class="fas fa-certificate" aria-hidden="true"></i> Sistema Certificado de Trazabilidad Documental</p>
            <p><i class="fas fa-shield-alt" aria-hidden="true"></i> Seguridad y Confiabilidad Garantizada</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- ========================================
         LADO DERECHO - FORMULARIO DE LOGIN
         ======================================== -->
    <section class="login-form-section" aria-label="Formulario de inicio de sesi√≥n">
      <div class="form-container">
        
        <!-- Encabezado del formulario -->
        <header class="form-header">
          <h1 class="form-titulo">Iniciar Sesi√≥n</h1>
          <p class="form-subtitulo">Acceda a su cuenta del sistema ProNotary</p>
        </header>
        
        <!-- Contenedor para alertas din√°micas -->
        <div id="alertContainer" aria-live="polite" aria-atomic="true">
          <!-- Alerta de error del servidor (si existe) -->
          {{#if error}}
          <div class="alert-custom alert-danger" role="alert">
            <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
            <span>{{error}}</span>
          </div>
          {{/if}}
        </div>
        
        <!-- Formulario principal de login -->
        <form id="loginForm" action="/api/matrizadores/login" method="POST" class="login-form">
          
          <!-- Campo de Email -->
          <div class="form-group">
            <label for="email" class="form-label">
              <i class="fas fa-envelope" aria-hidden="true"></i>
              Correo Electr√≥nico
            </label>
            <div class="input-container">
              <i class="fas fa-envelope input-icon" aria-hidden="true"></i>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="nombre@ejemplo.com"
                autocomplete="email"
                required
                aria-describedby="email-help"
                aria-invalid="false"
              >
            </div>
            <div id="email-help" class="sr-only">Ingrese su direcci√≥n de correo electr√≥nico registrada</div>
          </div>
          
          <!-- Campo de Contrase√±a -->
          <div class="form-group">
            <label for="password" class="form-label">
              <i class="fas fa-lock" aria-hidden="true"></i>
              Contrase√±a
            </label>
            <div class="input-container">
              <i class="fas fa-lock input-icon" aria-hidden="true"></i>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input" 
                placeholder="Ingrese su contrase√±a"
                autocomplete="current-password"
                required
                aria-describedby="password-help"
                aria-invalid="false"
              >
              <button 
                type="button" 
                id="passwordToggle" 
                class="password-toggle" 
                aria-label="Mostrar contrase√±a"
                title="Mostrar/Ocultar contrase√±a"
              >
                <i class="fas fa-eye" aria-hidden="true"></i>
              </button>
            </div>
            <div id="password-help" class="sr-only">Ingrese su contrase√±a del sistema</div>
          </div>
          
          <!-- Checkbox Recordarme -->
          <div class="checkbox-container">
            <div class="checkbox-custom">
              <input 
                type="checkbox" 
                id="rememberMe" 
                name="rememberMe" 
                aria-describedby="remember-help"
              >
              <span class="checkmark" aria-hidden="true"></span>
            </div>
            <label for="rememberMe" class="checkbox-label">
              Recordar mi sesi√≥n
            </label>
            <div id="remember-help" class="sr-only">Mantener la sesi√≥n iniciada en este dispositivo</div>
          </div>
          
          <!-- Bot√≥n de env√≠o -->
          <button 
            type="submit" 
            id="submitButton" 
            class="btn-login"
            aria-describedby="submit-help"
          >
            <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
            Iniciar Sesi√≥n
          </button>
          <div id="submit-help" class="sr-only">Presione para acceder al sistema ProNotary</div>
          
        </form>
        
        <!-- Enlaces adicionales -->
        <div class="form-links">
          <a href="#" onclick="return false;" title="Funcionalidad pr√≥ximamente disponible">
            <i class="fas fa-question-circle" aria-hidden="true"></i>
            ¬øOlvidaste tu contrase√±a?
          </a>
        </div>
        
        <!-- Informaci√≥n de soporte t√©cnico -->
        <div class="form-footer mt-4 text-center">
          <small class="text-muted">
            <i class="fas fa-headset" aria-hidden="true"></i>
            ¬øProblemas t√©cnicos? Contacte al administrador del sistema
          </small>
        </div>
        
      </div>
    </section>
    
  </div>
  
  <!-- ========================================
       SCRIPTS Y FUNCIONALIDAD
       ======================================== -->
  
  <!-- Bootstrap JavaScript (solo para componentes necesarios) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- JavaScript espec√≠fico del login -->
  <script src="/js/login.js"></script>
  
  <!-- Script de inicializaci√≥n adicional -->
  <script>
    // Configuraci√≥n espec√≠fica para esta instancia
    document.addEventListener('DOMContentLoaded', function() {
      // Configurar mensajes personalizados
      if (window.ProNotaryLogin) {
        // Personalizar mensajes de validaci√≥n
        window.ProNotaryLogin.validation.email.message = 'Por favor, ingrese un email v√°lido de la notar√≠a';
        window.ProNotaryLogin.validation.password.message = 'La contrase√±a debe tener al menos 3 caracteres';
        
        // Configurar comportamiento espec√≠fico
        console.log('üèõÔ∏è ProNotary Login - Notar√≠a 18 inicializada');
      }
      
      // Detectar si viene de una redirecci√≥n con error
      const urlParams = new URLSearchParams(window.location.search);
      const errorParam = urlParams.get('error');
      
      if (errorParam) {
        let errorMessage = 'Error de autenticaci√≥n';
        
        switch (errorParam) {
          case 'no_autorizado':
            errorMessage = 'Debe iniciar sesi√≥n para acceder al sistema';
            break;
          case 'sesion_expirada':
            errorMessage = 'Su sesi√≥n ha expirado. Por favor, inicie sesi√≥n nuevamente';
            break;
          case 'usuario_inactivo':
            errorMessage = 'Su cuenta est√° inactiva. Contacte al administrador';
            break;
          case 'token_invalido':
            errorMessage = 'Token de sesi√≥n inv√°lido. Por favor, inicie sesi√≥n nuevamente';
            break;
        }
        
        // Mostrar alerta si hay m√≥dulo de login disponible
        if (window.ProNotaryLogin && window.ProNotaryLogin.showAlert) {
          setTimeout(() => {
            window.ProNotaryLogin.showAlert(errorMessage, 'error');
          }, 500);
        }
      }
    });
    
    // Configuraci√≥n de accesibilidad mejorada
    document.addEventListener('keydown', function(e) {
      // Navegaci√≥n por Tab mejorada
      if (e.key === 'Tab') {
        document.body.classList.add('keyboard-navigation');
      }
    });
    
    document.addEventListener('mousedown', function() {
      document.body.classList.remove('keyboard-navigation');
    });
  </script>
  
  <!-- Estilos adicionales para accesibilidad -->
  <style>
    /* Mejoras de accesibilidad para navegaci√≥n por teclado */
    .keyboard-navigation *:focus {
      outline: 3px solid #FFC107 !important;
      outline-offset: 2px !important;
    }
    
    /* Ocultar elementos solo para lectores de pantalla */
    .sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }
    
    /* Mejoras para usuarios con preferencias de movimiento reducido */
    @media (prefers-reduced-motion: reduce) {
      .login-branding::before,
      .login-branding::after,
      .icono-justicia {
        animation: none !important;
      }
    }
    
    /* Mejoras de contraste para usuarios con problemas de visi√≥n */
    @media (prefers-contrast: high) {
      .login-branding {
        background: linear-gradient(135deg, #0D47A1 0%, #000051 100%) !important;
      }
      
      .form-input {
        border-width: 3px !important;
      }
      
      .btn-login {
        border: 3px solid #0D47A1 !important;
      }
    }
  </style>
  
</body>
</html> 